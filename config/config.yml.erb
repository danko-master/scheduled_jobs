default: &default
  runner:
    instances: 1
    input_correction_queue: "svp_redis_correction"
    output_queue: "svp_billing"

default_database: &default_database
  adapter: postgresql
  encoding: utf8
  host: "<%= ENV.fetch('SVP_DB_HOST', 'db') %>"
  port: 5432
  username: "<%= ENV.fetch('SVP_DB_USER', 'postgres') %>"
  password: "<%= ENV.fetch('SVP_DB_PASSWORD', '') %>"

default_rabbit: &default_rabbit
  port: 5672
  host: <%= ENV.fetch('SVP_RABBIT_HOST', 'localhost') %>
  user: <%= ENV.fetch('SVP_RABBIT_USER', 'guest') %>
  password: <%= ENV.fetch('SVP_RABBIT_PASSWORD', 'guest') %>
  vhost: <%= ENV.fetch('SVP_RABBIT_VHOST', '/') %>

default_redis: &default_redis
  port: 6379
  db: 4
  host: <%= ENV.fetch('SVP_REDIS_HOST', 'localhost') %>
  prefix: <%= ENV.fetch('SVP_REDIS_PREFIX', '') %>


development:
  <<: *default

  database:
    <<: *default_database
    database: svpdb_dev

  rabbit:
    <<: *default_rabbit

  redis_cache:
    <<: *default_redis

  remote_syslog:
    host: '0.0.0.0'
    port: 514

test:
  runner:
    instances: 1
    input_correction_queue: "svp_redis_correction_test"
    output_queue: "svp_billing_test"

  database:
    <<: *default_database
    database: svpdb_test


  rabbit:
    <<: *default_rabbit


  redis_cache:
    <<: *default_redis

  remote_syslog:
    host: '172.17.10.41'
    port: 514


production:
  <<: *default

  database:
    <<: *default_database
    database: svpdb

  rabbit:
    <<: *default_rabbit


  redis_cache:
    <<: *default_redis

  remote_syslog:
    host: '10.0.1.200'
    port: 514
    disable: 1